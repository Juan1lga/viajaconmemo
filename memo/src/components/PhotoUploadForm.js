import React, { useState } from "react";import api from "../utils/api";import "./PhotoUploadForm.css";const PhotoUploadForm = ({ onClose }) => { const [title, setTitle] = useState(""); const [description, setDescription] = useState(""); const [file, setFile] = useState(null); const [message, setMessage] = useState(""); const [error, setError] = useState(""); const handleSubmit = async (e) => { e.preventDefault(); if (!file) { setError("Por favor, selecciona un archivo."); setMessage(""); return; } try { const formData = new FormData(); formData.append("image", file); formData.append("title", title); formData.append("description", description); await api.post("/photos/upload", formData, { headers: { "Content-Type": "multipart/form-data" } }); setMessage("Foto subida exitosamente. Pendiente de aprobación."); setError(""); setTitle(""); setDescription(""); setFile(null); if (typeof onClose === "function") { onClose(); } } catch (err) { setError("Error al subir la foto: " + (err?.response?.data?.msg || err.message)); setMessage(""); } }; return (<form className="upload-form" onSubmit={handleSubmit}> {message && <div className="notice success">{message}</div>} {error && <div className="notice error">{error}</div>} <div className="form-field"> <label htmlFor="title">Título</label> <input id="title" type="text" value={title} onChange={(e) => setTitle(e.target.value)} placeholder="Título de la foto" required /> </div> <div className="form-field"> <label htmlFor="file">Archivo</label> <input id="file" type="file" onChange={(e) => setFile(e.target.files[0])} accept="image/*" required /> </div> <div className="form-field form-full"> <label htmlFor="description">Descripción</label> <textarea id="description" value={description} onChange={(e) => setDescription(e.target.value)} placeholder="Descripción (opcional)" rows={4}></textarea> </div> <div className="form-actions form-full"> <button type="submit" className="btn primary">Subir Foto</button> {typeof onClose === "function" && (<button type="button" className="btn" onClick={onClose}>Cancelar</button>)} </div> </form> );};export default PhotoUploadForm;